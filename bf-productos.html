<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Galer√≠a de trabajos ‚Äî BF Productos y Servicios. Carrocer√≠as, estructuras, equipamiento y m√°s.">
    <title>Galer√≠a de Trabajos ‚Äî BF Productos y Servicios</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Open+Sans:wght@300;400;600&display=swap');
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --orange:#ff6600;
            --bg:#111;
            --card:#1e1e1e;
            --card2:#252525;
            --border:#2e2e2e;
            --text:#d0d0d0;
            --muted:#888;
        }
        html{scroll-behavior:smooth}
        body{font-family:'Open Sans',sans-serif;background:var(--bg);color:var(--text);line-height:1.6}

        /* HEADER */
        header{background:linear-gradient(to right,#070707,#151515);border-bottom:3px solid var(--orange);padding:.8rem 0 0;position:sticky;top:0;z-index:1000;box-shadow:0 4px 30px rgba(255,102,0,.2)}
        .container{max-width:1200px;margin:0 auto;padding:0 2rem}
        .header-top{display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:.5rem;padding-bottom:.6rem}
        h1{font-family:'Oswald',sans-serif;color:var(--orange);font-size:1.8rem;text-transform:uppercase;letter-spacing:3px;line-height:1.1}
        .tagline{color:var(--muted);font-size:.82rem;font-style:italic;margin-top:2px}
        .header-badge{background:rgba(255,102,0,.1);border:1px solid rgba(255,102,0,.25);border-radius:4px;padding:.25rem .7rem;font-size:.75rem;color:var(--orange);font-family:'Oswald',sans-serif;letter-spacing:1px;text-transform:uppercase;white-space:nowrap;align-self:flex-start}
        nav{display:flex;justify-content:center;gap:0;flex-wrap:wrap}
        nav a{color:#aaa;text-decoration:none;font-family:'Oswald',sans-serif;font-size:.95rem;font-weight:600;padding:.55rem 1.6rem;border:none;border-right:1px solid #333;background:#1a1a1a;transition:all .3s;text-transform:uppercase;letter-spacing:1px}
        nav a:first-child{border-left:1px solid #333}
        nav a:hover,nav a.active{background:var(--orange);color:#fff;text-decoration:none}

        /* PAGE HERO */
        .page-hero{background:linear-gradient(rgba(0,0,0,.75),rgba(0,0,0,.88)),repeating-linear-gradient(45deg,#1a1a1a 0,#1a1a1a 2px,#141414 2px,#141414 22px);padding:3.5rem 0 2.5rem;text-align:center;border-bottom:1px solid var(--border)}
        .page-hero h2{font-family:'Oswald',sans-serif;font-size:2.6rem;color:#fff;text-transform:uppercase;letter-spacing:4px}
        .page-hero h2 span{color:var(--orange)}
        .page-hero p{color:var(--muted);font-size:1rem;margin-top:.6rem}

        /* TABS */
        .cat-tabs{display:flex;justify-content:center;gap:0;margin:2.5rem auto 0;max-width:700px;border:2px solid var(--border);border-radius:6px;overflow:hidden}
        .cat-tab{flex:1;padding:.8rem 1rem;background:var(--card);color:var(--muted);font-family:'Oswald',sans-serif;font-size:1rem;text-transform:uppercase;letter-spacing:1px;cursor:pointer;border:none;border-right:1px solid var(--border);transition:all .25s}
        .cat-tab:last-child{border-right:none}
        .cat-tab:hover{background:#2a2a2a;color:#ddd}
        .cat-tab.active{background:var(--orange);color:#fff;font-weight:700}

        /* GALLERY */
        .gallery-section{padding:3rem 0;display:none}
        .gallery-section.visible{display:block}
        .section-title{font-family:'Oswald',sans-serif;font-size:1.8rem;color:var(--orange);text-transform:uppercase;letter-spacing:2px;margin-bottom:.4rem;display:flex;align-items:center;gap:.6rem}
        .section-title::after{content:'';flex:1;height:2px;background:linear-gradient(to right,var(--orange),transparent);margin-left:1rem}
        .section-desc{color:var(--muted);font-size:.95rem;margin-bottom:2rem}
        .photo-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1.2rem}

        .photo-card{background:var(--card2);border:1px solid var(--border);border-radius:6px;overflow:hidden;position:relative;transition:all .3s;cursor:pointer}
        .photo-card:hover{border-color:var(--orange);transform:translateY(-4px);box-shadow:0 8px 28px rgba(255,102,0,.3)}
        .photo-thumb{width:100%;aspect-ratio:4/3;object-fit:cover;display:block}
        .photo-overlay{position:absolute;top:0;left:0;right:0;aspect-ratio:4/3;display:flex;align-items:center;justify-content:center;background:rgba(255,102,0,.12);opacity:0;transition:opacity .3s}
        .photo-card:hover .photo-overlay{opacity:1}
        .photo-overlay span{background:var(--orange);color:#fff;font-family:'Oswald',sans-serif;font-size:.9rem;padding:.4rem 1rem;border-radius:3px;text-transform:uppercase;letter-spacing:1px}
        .photo-caption{padding:.7rem 1rem;border-top:1px solid var(--border)}
        .photo-name{font-size:.9rem;color:#ccc;font-weight:600}

        .empty-state{grid-column:1/-1;text-align:center;padding:3rem 1rem;color:var(--muted)}
        .empty-state span{display:block;font-size:2.5rem;margin-bottom:.5rem;opacity:.3}

        /* LOADING */
        #loading-overlay{position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9998;gap:1rem;transition:opacity .4s}
        #loading-overlay p{color:#ccc}
        .spinner{width:40px;height:40px;border:3px solid #333;border-top-color:var(--orange);border-radius:50%;animation:spin .7s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}

        /* LIGHTBOX */
        .lightbox{display:none;position:fixed;inset:0;background:rgba(0,0,0,.94);z-index:9999;align-items:center;justify-content:center;padding:2rem}
        .lightbox.open{display:flex}
        .lightbox-inner{position:relative;max-width:960px;width:100%}
        .lightbox img{width:100%;border-radius:6px;border:2px solid var(--orange);max-height:88vh;object-fit:contain}
        .lightbox-close{position:absolute;top:-1rem;right:-1rem;background:var(--orange);color:#fff;border:none;border-radius:50%;width:2.2rem;height:2.2rem;font-size:1.1rem;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .lightbox-name{position:absolute;bottom:-2rem;left:0;right:0;text-align:center;color:#aaa;font-size:.85rem}

        /* FOOTER */
        footer{background:#080808;border-top:2px solid var(--border);padding:2rem 0;text-align:center;color:#555;font-size:.9rem;position:relative}
        .secret-trigger{cursor:default;user-select:none;color:transparent;font-size:1px;position:absolute;bottom:.8rem;right:1.5rem;padding:1.2rem}

        /* WHATSAPP */
        .whatsapp-float{position:fixed;bottom:2rem;right:2rem;background:#25d366;border-radius:50%;width:3.6rem;height:3.6rem;display:flex;align-items:center;justify-content:center;text-decoration:none;box-shadow:0 4px 20px rgba(37,211,102,.4);transition:transform .3s;z-index:500}
        .whatsapp-float:hover{transform:scale(1.12)}

        @media(max-width:768px){
            h1{font-size:1.5rem}
            .page-hero h2{font-size:1.8rem}
            .cat-tabs{flex-direction:column;max-width:300px}
            .cat-tab{border-right:none;border-bottom:1px solid var(--border)}
            .cat-tab:last-child{border-bottom:none}
            .photo-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}
            .header-badge{display:none}
        }
    </style>
</head>
<body>

<div id="loading-overlay"><div class="spinner"></div><p>Cargando galer√≠a...</p></div>

<header>
    <div class="container">
        <div class="header-top">
            <div>
                <h1>‚öô BF Productos y Servicios</h1>
                <p class="tagline">Taller Metal√∫rgico ‚Äî Soluciones profesionales en metal y soldadura</p>
            </div>
            <span class="header-badge">Desde 1960</span>
        </div>
        <nav>
            <a href="index.html">Inicio</a>
            <a href="bf-productos.html" class="active">Galer√≠a</a>
            <a href="bf-quienes-somos.html">Qui√©nes somos</a>
            <a href="index.html#contacto">Contacto</a>
        </nav>
    </div>
</header>

<div class="page-hero">
    <div class="container">
        <h2>Galer√≠a de <span>Trabajos</span></h2>
        <p>Conoc√© nuestros proyectos realizados ‚Äî calidad y experiencia en cada obra</p>
        <div class="cat-tabs">
            <button class="cat-tab active" onclick="showCat('carrocerias',this)">üöõ Carrocer√≠as</button>
            <button class="cat-tab" onclick="showCat('estructuras',this)">üèóÔ∏è Estructuras</button>
            <button class="cat-tab" onclick="showCat('equipamiento',this)">‚ö° Equipamiento</button>
            <button class="cat-tab" onclick="showCat('otros',this)">üî© Otros</button>
        </div>
    </div>
</div>

<main>
<div class="container">
    <section id="carrocerias" class="gallery-section visible">
        <div class="section-title">üöõ Carrocer√≠as</div>
        <p class="section-desc">Fabricaci√≥n y reparaci√≥n de carrocer√≠as personalizadas, trailers y trabajos de l√≠nea pesada.</p>
        <div class="photo-grid" id="grid-carrocerias"><div class="empty-state"><span>üì∑</span>Pr√≥ximamente fotos de nuestros trabajos</div></div>
    </section>
    <section id="estructuras" class="gallery-section">
        <div class="section-title">üèóÔ∏è Estructuras</div>
        <p class="section-desc">Estructuras met√°licas, portones, rejas, escaleras y trabajos de construcci√≥n en metal.</p>
        <div class="photo-grid" id="grid-estructuras"><div class="empty-state"><span>üì∑</span>Pr√≥ximamente fotos de nuestros trabajos</div></div>
    </section>
    <section id="equipamiento" class="gallery-section">
        <div class="section-title">‚ö° Equipamiento</div>
        <p class="section-desc">Equipamiento para unidades 4x4, miner√≠a y maquinaria industrial a medida.</p>
        <div class="photo-grid" id="grid-equipamiento"><div class="empty-state"><span>üì∑</span>Pr√≥ximamente fotos de nuestros trabajos</div></div>
    </section>
    <section id="otros" class="gallery-section">
        <div class="section-title">üî© Otros</div>
        <p class="section-desc">Trabajos especiales, reparaciones, mantenimiento industrial y proyectos varios.</p>
        <div class="photo-grid" id="grid-otros"><div class="empty-state"><span>üì∑</span>Pr√≥ximamente fotos de nuestros trabajos</div></div>
    </section>
</div>
</main>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox" onclick="closeLightbox()">
    <div class="lightbox-inner" onclick="event.stopPropagation()">
        <button class="lightbox-close" onclick="closeLightbox()">‚úï</button>
        <img id="lightbox-img" src="" alt="">
        <div class="lightbox-name" id="lightbox-name"></div>
    </div>
</div>

<footer>
    <div class="container">
        <p>&copy; 2026 BF Productos y Servicios ‚Äî Taller Metal√∫rgico. Todos los derechos reservados.</p>
    </div>
    <span class="secret-trigger" onclick="secretClick()">¬∑</span>
</footer>

<a href="https://w.app/zwassv" class="whatsapp-float" target="_blank" rel="noopener" title="Contactar por WhatsApp">
    <span style="font-size:1.9rem">üí¨</span>
</a>

<script>
const CLOUD_NAME = 'dtmgoqeuq';
const CATS = ['carrocerias','estructuras','equipamiento','otros'];
let photos = {carrocerias:[],estructuras:[],equipamiento:[],otros:[]};

// ‚îÄ‚îÄ Carga fotos directamente desde Cloudinary por carpeta ‚îÄ‚îÄ
async function loadAll() {
    for (const cat of CATS) {
        try {
            const tag = 'bf_' + cat;
            // Primero intentamos por tag, si falla usamos el √≠ndice de carpeta
            const url = 'https://res.cloudinary.com/' + CLOUD_NAME + '/image/list/' + tag + '.json';
            const res = await fetch(url);
            if (res.ok) {
                const data = await res.json();
                photos[cat] = (data.resources || []).map(r => ({
                    url: 'https://res.cloudinary.com/' + CLOUD_NAME + '/image/upload/q_auto,f_auto/' + r.public_id,
                    name: r.public_id.split('/').pop().replace(/\.[^.]+$/, '')
                }));
            } else {
                photos[cat] = [];
            }
        } catch(e) { photos[cat] = []; }
    }
}
// ‚îÄ‚îÄ Render ‚îÄ‚îÄ
function renderAll() {
    CATS.forEach(cat => {
        const grid = document.getElementById('grid-' + cat);
        const empty = grid.querySelector('.empty-state');
        [...grid.querySelectorAll('.photo-card')].forEach(c => c.remove());

        photos[cat].forEach(p => {
            const card = document.createElement('div');
            card.className = 'photo-card';
            card.onclick = () => openLightbox(p.url, p.name);
            card.innerHTML =
                '<img class="photo-thumb" src="'+p.url+'" alt="'+esc(p.name)+'" loading="lazy">' +
                '<div class="photo-overlay"><span>Ver foto</span></div>' +
                '<div class="photo-caption"><span class="photo-name">'+esc(p.name)+'</span></div>';
            grid.insertBefore(card, empty);
        });

        if (empty) empty.style.display = photos[cat].length ? 'none' : '';
    });
}

function showCat(cat, btn) {
    document.querySelectorAll('.gallery-section').forEach(s => s.classList.remove('visible'));
    document.querySelectorAll('.cat-tab').forEach(t => t.classList.remove('active'));
    document.getElementById(cat).classList.add('visible');
    btn.classList.add('active');
    window.scrollTo({top: document.querySelector('.page-hero').offsetTop - 70, behavior:'smooth'});
}

function openLightbox(url, name) {
    document.getElementById('lightbox-img').src = url;
    document.getElementById('lightbox-name').textContent = name || '';
    document.getElementById('lightbox').classList.add('open');
    document.body.style.overflow = 'hidden';
}
function closeLightbox() {
    document.getElementById('lightbox').classList.remove('open');
    document.body.style.overflow = '';
}
document.addEventListener('keydown', e => { if(e.key==='Escape') closeLightbox(); });

function esc(s){return String(s).replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));}

// ‚îÄ‚îÄ Secret admin ‚îÄ‚îÄ
let _sc=0,_st;
function secretClick(){
    _sc++;clearTimeout(_st);_st=setTimeout(()=>_sc=0,800);
    if(_sc>=3){_sc=0;window.location.href='bf-admin.html';}
}

// ‚îÄ‚îÄ Init ‚îÄ‚îÄ
(async()=>{
    await loadAll();
    renderAll();
    document.getElementById('loading-overlay').style.opacity='0';
    setTimeout(()=>document.getElementById('loading-overlay').style.display='none',400);
})();
</script>
</body>
</html>
